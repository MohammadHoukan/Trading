exchange:
  name: binance
  mode: testnet  # 'live' or 'testnet'
  api_key: "${BINANCE_API_KEY}"
  secret: "${BINANCE_SECRET_KEY}"
  
  # Dynamic Key Pool for Workers
  pool:
    - api_key: "${BINANCE_API_KEY_1}"
      secret: "${BINANCE_SECRET_KEY_1}"
    - api_key: "${BINANCE_API_KEY_2}"
      secret: "${BINANCE_SECRET_KEY_2}"
    - api_key: "${BINANCE_API_KEY_3}"
      secret: "${BINANCE_SECRET_KEY_3}"
    - api_key: "${BINANCE_API_KEY_4}"
      secret: "${BINANCE_SECRET_KEY_4}"
    - api_key: "${BINANCE_API_KEY_5}"
      secret: "${BINANCE_SECRET_KEY_5}"

swarm:
  base_currency: "${BASE_CURRENCY:-USDT}"
  max_concurrency: ${MAX_CONCURRENCY:-5}
  risk_per_bot: ${RISK_PER_BOT:-100.0}
  loop_interval: ${LOOP_INTERVAL:-10}

regime:
  # Default exposure scale during TRENDING regimes
  trending_scale: 0.5
  # Per-symbol overrides tuned from regime-policy sweep
  per_symbol:
    ETH/USDT:
      trending_scale: 0.25
    SOL/USDT:
      trending_scale: 0.75

redis:
  host: "${REDIS_HOST:-localhost}"
  port: ${REDIS_PORT:-6379}
  db: ${REDIS_DB:-0}
  channels:
    command: "swarm:cmd"
    status: "swarm:status"
    market_data: "swarm:market"

dashboard:
  worker_stale_after_seconds: ${WORKER_STALE_AFTER_SECONDS:-30}

# Smart Trading Features (ML-enhanced)
smart_features:
  ml_enabled: ${ML_ENABLED:-true}

  regime_classifier:
    enabled: ${REGIME_CLASSIFIER_ENABLED:-true}
    ensemble_weight: 0.6  # Weight for ML score vs rule-based score
    confidence_threshold: 0.7  # Minimum confidence to trust ML prediction
    model_path: "data/models/regime_classifier.joblib"

  volatility_grids:
    enabled: ${VOLATILITY_GRIDS_ENABLED:-true}
    baseline_volatility: 0.025  # 2.5% ATR/price baseline
    scale_factor: 1.5  # How aggressively to scale grid spacing
    min_multiplier: 0.5  # Minimum grid spacing multiplier
    max_multiplier: 2.0  # Maximum grid spacing multiplier

  mean_reversion:
    enabled: ${MEAN_REVERSION_ENABLED:-true}
    sma_period: 20  # Period for SMA calculation
    std_period: 50  # Period for standard deviation
    entry_z_threshold: 1.5  # Z-score threshold to signal entry
    exit_z_threshold: 0.5  # Z-score threshold to signal exit

  pair_ranking_ml:
    enabled: ${PAIR_RANKING_ML_ENABLED:-true}
    ml_weight: 0.4  # Weight for ML prediction vs rule-based score
    model_path: "data/models/pair_predictor.joblib"
